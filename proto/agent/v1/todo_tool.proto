syntax = "proto3";

package agent.v1;

enum TodoStatus {
  TODO_STATUS_UNSPECIFIED = 0;
  TODO_STATUS_PENDING = 1;
  TODO_STATUS_IN_PROGRESS = 2;
  TODO_STATUS_COMPLETED = 3;
  TODO_STATUS_CANCELLED = 4;
}

message TodoItem {
  string id = 1;
  string content = 2;
  TodoStatus status = 3;
  int64 created_at = 4;
  int64 updated_at = 5;
  repeated string dependencies = 6;
}

message UpdateTodosToolCall {
  UpdateTodosArgs args = 1;
  UpdateTodosResult result = 2;
}

message UpdateTodosArgs {
  repeated TodoItem todos = 1;
  bool merge = 2;
}

message UpdateTodosResult {
  oneof result {
    UpdateTodosSuccess success = 1;
    UpdateTodosError error = 2;
  }
}

message UpdateTodosSuccess {
  repeated TodoItem todos = 1;
  int32 total_count = 2;
  bool was_merge = 3;
}

message UpdateTodosError {
  string error = 1;
}

message ReadTodosToolCall {
  ReadTodosArgs args = 1;
  ReadTodosResult result = 2;
}

message ReadTodosArgs {
  repeated TodoStatus status_filter = 1;
  repeated string id_filter = 2;
}

message ReadTodosResult {
  oneof result {
    ReadTodosSuccess success = 1;
    ReadTodosError error = 2;
  }
}

message ReadTodosSuccess {
  repeated TodoItem todos = 1;
  int32 total_count = 2;
}

message ReadTodosError {
  string error = 1;
}
